{% extends "base.html" %}
{% block title %}All Jobs — AiPod Admin{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-2xl font-bold text-white mb-2">All Jobs</h1>
    <div class="flex gap-3 text-sm">
        <a href="/admin" class="text-gray-400 hover:text-white transition">Dashboard</a>
        <a href="/admin/users" class="text-gray-400 hover:text-white transition">Users</a>
        <a href="/admin/jobs" class="text-yellow-400 font-medium">Jobs</a>
        <a href="/admin/feedback" class="text-gray-400 hover:text-white transition">Feedback</a>
    </div>
</div>

<div class="overflow-x-auto">
    <table class="w-full text-sm">
        <thead>
            <tr class="text-left text-gray-400 border-b border-gray-800">
                <th class="pb-2 pr-4">ID</th>
                <th class="pb-2 pr-4">Owner</th>
                <th class="pb-2 pr-4">Status</th>
                <th class="pb-2 pr-4">Language</th>
                <th class="pb-2 pr-4">File</th>
                <th class="pb-2">Created</th>
            </tr>
        </thead>
        <tbody>
            {% for job in jobs %}
            <tr class="border-b border-gray-800/50">
                <td class="py-2 pr-4">
                    <a href="/jobs/{{ job.id }}" class="text-blue-400 hover:underline">{{ job.id[:8] }}...</a>
                </td>
                <td class="py-2 pr-4 text-gray-400">{{ job.owner_email }}</td>
                <td class="py-2 pr-4">
                    <span class="px-2 py-0.5 rounded text-xs
                        {% if job.status == 'completed' %}bg-green-900/50 text-green-400
                        {% elif job.status == 'failed' %}bg-red-900/50 text-red-400
                        {% elif job.status == 'processing' %}bg-blue-900/50 text-blue-400
                        {% else %}bg-gray-800 text-gray-400{% endif %}">
                        {{ job.status }}
                    </span>
                </td>
                <td class="py-2 pr-4 text-gray-300">{{ job.target_lang_name }}</td>
                <td class="py-2 pr-4 text-gray-400 truncate max-w-[200px]">{{ job.original_filename or '—' }}</td>
                <td class="py-2 text-gray-500 text-xs">{{ job.created_at[:16] if job.created_at else '—' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if not jobs %}
<p class="text-gray-500 text-sm mt-4">No jobs found.</p>
{% endif %}
{% endblock %}
